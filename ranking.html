<!DOCTYPE html>
<html>
    <head>
        <title>Ranking Page</title>
        <link rel="stylesheet" href="main.css">
    </head>

    <body>
        <h1>HACKATHON RANKING SYSTEM</h1>

        <p>Here are the rankings:</p>

        <ol id="ranking-list">
        <!-- empty for now --!>
        </ol>
        
        <button onclick="window.location.href='index.html';">Add a review</button>

        <script>
            function fetchRankings() {
                fetch("https://dylporter.pythonanywhere.com/api/rankings")
                    .then(res => {
                        if (!res.ok) {
                            throw new Error("Network response failed");
                        }
                        return res.json();
                    })
                    .then(rankings => {
                        const rankingList = document.getElementById("ranking-list");
                        rankingList.innerHTML = "";
                        rankings.forEach(item => {
                            const li = document.createElement("li");
                            li.textContent = `${item.company}: Score: ${item.weighted_score} / 5 [Avg Material: ${item.average_material}, Avg Disposal: ${item.average_disposal}], Review: ${item.ai_review}`;
                            rankingList.appendChild(li);
                        });
                    })
                    .catch(error => console.error("Error fetching rankings:", error));
            }

            window.onload = fetchRankings;
        </script>
    </body>
</html>
