<!DOCTYPE html>

<html>
    <head>
        <title>Form Page</title>
        <link rel="stylesheet" href="main.css">
    </head>

    <body>
        <h1>HADAM Prototype | Hack4SDG</h1>

        <form class="form">
            <label>Your Email:</label>
            <input type="email" name="email" placeholder="e.g. john.chan@email.com"><br><br>

            <label>Company Name:</label>
            <input type="text" name="company" placeholder="e.g. Starbucks"><br><br>

            <p>Rating System (1 - Terrible, 5 - Excellent):</p>

            <label>Material of Packaging:</label>
            <div class="radio-group">
                <label><input type="radio" name="material" value="1"> 1</label>
                <label><input type="radio" name="material" value="2"> 2</label>
                <label><input type="radio" name="material" value="3"> 3</label>
                <label><input type="radio" name="material" value="4"> 4</label>
                <label><input type="radio" name="material" value="5"> 5</label>
            </div>

            <label>Convenience of Disposal:</label>
            <div class="radio-group">
                <label><input type="radio" name="disposal" value="1"> 1</label>
                <label><input type="radio" name="disposal" value="2"> 2</label>
                <label><input type="radio" name="disposal" value="3"> 3</label>
                <label><input type="radio" name="disposal" value="4"> 4</label>
                <label><input type="radio" name="disposal" value="5"> 5</label>
            </div>

            <label>[OPTIONAL] Review:</label>
            <input type="text" name="review" placeholder="Write a quick review"><br><br>

            <label>
                <input type="checkbox" name="termsconditions" required>
                Agree to the Terms and Conditions
            </label>

            <button type="submit">Submit</button>
        </form>

        <button onclick="window.location.href='ranking.html';">View Rankings</button>

        <script>
            const formEl = document.querySelector(".form");

            formEl.addEventListener("submit", event => {
                event.preventDefault();

                const formData = new FormData(formEl);
                const data = Object.fromEntries(formData);

                fetch('https://dylporter.pythonanywhere.com/api/data', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    window.location.href = "ranking.html";
                })
                .catch(error => console.log(error));
            });
        </script>

    </body>
</html>
